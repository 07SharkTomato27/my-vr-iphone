<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>MetaQuestVR (web)</title>
<style>
:root{ --clock-color: #66f8ff; --ui-bg: rgba(0,0,0,0.45); --ui-accent: #29a3ff; }
html,body{height:100%;margin:0;background:#000;overflow:hidden;-webkit-user-select:none;user-select:none}
body.landscape{ transform-origin:center center; transform: rotate(90deg) translateY(-100vh); width:100vh; height:100vw; overflow:hidden; position:fixed; left:0; top:0}
#cameraVideo{position:fixed; inset:0; width:100vw; height:100vh; object-fit:cover; z-index:0; transform:none}
#clock{position:fixed; right:14px; bottom:14px; z-index:4000; color:var(--clock-color); font-weight:700; font-family:system-ui, -apple-system, "Helvetica Neue", "Segoe UI"; font-size:18px; text-shadow:0 2px 6px rgba(0,0,0,0.6)}
#hudButtons{position:fixed; left:14px; top:14px; z-index:4000; display:flex; gap:8px; align-items:center; pointer-events:auto}
.btn{background:var(--ui-bg); color:#fff; border-radius:10px; padding:8px; min-width:40px; text-align:center; font-weight:600; box-shadow:0 6px 18px rgba(0,0,0,0.6); pointer-events:auto}
.iconBtn{width:42px; height:42px; display:flex; align-items:center; justify-content:center; border-radius:10px; font-size:18px}
#settingsPanel{position:fixed; left:14px; top:64px; z-index:4000; background:rgba(6,6,6,0.6); color:#fff; padding:10px; border-radius:10px; width:220px; display:none; font-family:system-ui; pointer-events:auto}
#settingsPanel label{display:flex; justify-content:space-between; margin:6px 0; align-items:center}
#settingsPanel input[type=range]{width:100%}
#gpCursor{position:fixed; width:22px; height:22px; border-radius:50%; background:rgba(255,255,255,0.95); transform:translate(-50%,-50%); z-index:3000; pointer-events:none; box-shadow:0 6px 18px rgba(0,0,0,0.5)}
#threeContainer{position:fixed; inset:0; z-index:100; pointer-events:none}
.app-window{width:360px; height:220px; border-radius:10px; overflow:hidden; background:rgba(18,18,24,0.88); box-shadow:0 14px 40px rgba(0,0,0,0.6); border:1px solid rgba(255,255,255,0.04); transform-style:preserve-3d; cursor:grab; pointer-events:auto}
.titlebar{height:34px; display:flex; align-items:center; padding:0 10px; gap:8px; background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.2)); color:#fff; font-weight:700; font-size:14px}
.title-actions{margin-left:auto; display:flex; gap:6px}
.tbtn{width:30px;height:26px;border-radius:6px;display:flex;align-items:center;justify-content:center;background:transparent;color:#fff; border:1px solid rgba(255,255,255,0.03); cursor:pointer}
.app-iframe{width:100%; height:calc(100% - 34px); border:none; background:#fff}
#addBtn{position:fixed; left:14px; bottom:14px; z-index:4000}
@media (max-width:600px){ .app-window{width:300px;height:200px} }
</style>
</head>
<body>
<video id="cameraVideo" autoplay playsinline muted></video>
<div id="threeContainer"></div>
<div id="gpCursor" style="display:none"></div>
<div id="clock" aria-hidden="false"></div>
<div id="hudButtons">
  <div id="gearBtn" class="btn iconBtn" title="設定">⚙</div>
  <div id="addBtnUI" class="btn" title="ウィンドウ追加">＋</div>
</div>
<div id="settingsPanel">
  <div style="font-weight:800;margin-bottom:6px">設定</div>
  <label>時計表示 <input id="clockToggle" type="checkbox" checked></label>
  <label>時計色 <input id="clockColor" type="color" value="#66f8ff"></label>
  <label>ウィンドウ透明度 <input id="wndAlpha" type="range" min="20" max="100" value="88"></label>
  <label>ウィンドウシャドウ <input id="shadowToggle" type="checkbox" checked></label>
  <div style="display:flex;gap:6px;margin-top:8px">
    <button id="addWindowBtn" class="btn" style="flex:1">＋ ウィンドウ</button>
    <button id="resetBtn" class="btn" style="flex:1">初期化</button>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.155.0/examples/js/renderers/CSS3DRenderer.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js"></script>
<script src="js/hand.js"></script>
<script src="js/main.js"></script>
</body>
</html>
