const HandJS={selected:null,offset:new THREE.Vector3(),makeDraggable:function(obj){obj.element.style.cursor='grab';obj.element.addEventListener('pointerdown',e=>{HandJS.selected=obj;HandJS.offset.x=e.clientX-obj.position.x;HandJS.offset.y=e.clientY-obj.position.y;obj.element.style.cursor='grabbing'});obj.element.addEventListener('pointerup',()=>{HandJS.selected=null;obj.element.style.cursor='grab';saveWindows()})},onPointerMove:function(e){if(!HandJS.selected)return;HandJS.selected.position.x=e.clientX-HandJS.offset.x;HandJS.selected.position.y=-(e.clientY-HandJS.offset.y)},init:function(){window.addEventListener('pointermove',HandJS.onPointerMove)}}
HandJS.init()
function saveWindows(){if(typeof windows!=='undefined'){const data=windows.map(w=>({x:w.position.x,y:w.position.y,z:w.position.z,rotX:w.rotation.x,rotY:w.rotation.y,rotZ:w.rotation.z,url:w.element.querySelector('iframe').src}));localStorage.setItem('windows',JSON.stringify(data))}}
